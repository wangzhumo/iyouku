# 消息中间件

## 简介

消息中间件就是软件和软件之间发送消息的软件


### 解决问题

- 减少业务调用链，及时返回，减少等待时间
- 部分组件故障不会让整个业务崩溃
- 可以有效的对高峰期起到缓冲作用
- 不会像异步调用的实现方式一样，产生大量线程，内存资源占用少

### 工程中的作用

- 异步处理

- 系统解耦

- 消息的广播

- 流量削峰/控流

- 日志/消息的收集

- 最终一致性

  发出消息后不需要管理，消息接收方会最终处理掉

## 主流的消息中间件

- Apache ActiveMQ  比较老的一个消息中间件
  - Java开发
  - 支持连接多QpenWire/STOMP/REST/XMPP/AMQP
  - 可以使用JDBC连接数据库
  - 监控/重试
  - 不适用于上千个队列

- RabbitMQ  主流使用，通用性好
  - 支持发送确认，可靠性高
  - 基于`Erlang`，支持高并发
  - 社区活跃，文档齐全
  - `AMQP`协议
  - 代理模式下，中央节点增加延迟，影响性能

- Apache RocketMQ 性能强大，但对架构/运维有要求
  - 支持单机1w以上的持久化队列
  - 内存与磁盘都有数据，性能和可靠性强
  - 能保证亿级的能力，可以保障消息顺序
  - 社区活跃但是不及`RabbitMQ`

- Apache Kafka 一般用于大数据和日志，对大量数据支持好，可靠性弱

  - 原生分布式系统，对大数据友好
  - 零拷贝，减少IO
  - 快速持久化，性能高，稳定性好
  - 支持数据批量发送/拉取
  - 但是可靠性不好，实时性不定，不能重试，当单机超过64队列，性能劣化

  



